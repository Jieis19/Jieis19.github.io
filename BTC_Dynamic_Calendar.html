<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Calendar</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        .event {
            background-color: lightblue;
        }
    </style>
</head>
<body>

<h2>BTC Dynamic Calendar</h2>

<div id="calendar-container">
    <button onclick="previousMonth()">Previous Month</button>
    <button onclick="nextMonth()">Next Month</button>
    <table id="calendar">
        <thead>
            <tr>
                <th>Sun</th>
                <th>Mon</th>
                <th>Tue</th>
                <th>Wed</th>
                <th>Thu</th>
                <th>Fri</th>
                <th>Sat</th>
            </tr>
        </thead>
        <tbody id="calendar-body">
        </tbody>
    </table>
</div>

<div>
    <h3>Add Event</h3>
    <label for="event-date">Date:</label>
    <input type="date" id="event-date">
    <br>
    <label for="event-name">Event Name:</label>
    <input type="text" id="event-name">
    <br>
    <button onclick="addEvent()">Add Event</button>
</div>
<figure class="wp-block-table  predictor-forecast-table"><table class="predictor-table"><thead>
<tr>
<th scope="col">Date</th>
<th scope="col" class="text-right">Price</th>
<th scope="col" class="text-right">Change</th>
</tr> </thead>
<tbody><tr><td><span class="forecast-time">March 25, 2024</span></td><td class="text-right">$68,083</td><td class="text-right change-up">2.33%</td></tr><tr><td><span class="forecast-time">March 26, 2024</span></td><td class="text-right">$68,176</td><td class="text-right change-up">2.47%</td></tr><tr><td><span class="forecast-time">March 27, 2024</span></td><td class="text-right">$68,289</td><td class="text-right change-up">2.64%</td></tr><tr><td><span class="forecast-time">March 28, 2024</span></td><td class="text-right">$68,420</td><td class="text-right change-up">2.84%</td></tr><tr><td><span class="forecast-time">March 28, 2024</span></td><td class="text-right">$67,735</td><td class="text-right change-up">1.81%</td></tr><tr><td><span class="forecast-time">March 29, 2024</span></td><td class="text-right">$70,000</td><td class="text-right change-up">5.21%</td></tr><tr><td><span class="forecast-time">March 30, 2024</span></td><td class="text-right">$72,265</td><td class="text-right change-up">8.62%</td></tr><tr><td><span class="forecast-time">March 31, 2024</span></td><td class="text-right">$72,347</td><td class="text-right change-up">8.74%</td></tr><tr><td><span class="forecast-time">April 01, 2024</span></td><td class="text-right">$71,263</td><td class="text-right change-up">7.11%</td></tr><tr><td><span class="forecast-time">April 02, 2024</span></td><td class="text-right">$70,342</td><td class="text-right change-up">5.73%</td></tr><tr><td><span class="forecast-time">April 03, 2024</span></td><td class="text-right">$69,797</td><td class="text-right change-up">4.91%</td></tr><tr><td><span class="forecast-time">April 04, 2024</span></td><td class="text-right">$69,252</td><td class="text-right change-up">4.09%</td></tr><tr><td><span class="forecast-time">April 05, 2024</span></td><td class="text-right">$69,594</td><td class="text-right change-up">4.6%</td></tr><tr><td><span class="forecast-time">April 06, 2024</span></td><td class="text-right">$69,976</td><td class="text-right change-up">5.18%</td></tr><tr><td><span class="forecast-time">April 07, 2024</span></td><td class="text-right">$69,913</td><td class="text-right change-up">5.08%</td></tr><tr><td><span class="forecast-time">April 08, 2024</span></td><td class="text-right">$69,561</td><td class="text-right change-up">4.55%</td></tr><tr><td><span class="forecast-time">April 09, 2024</span></td><td class="text-right">$69,464</td><td class="text-right change-up">4.41%</td></tr><tr><td><span class="forecast-time">April 10, 2024</span></td><td class="text-right">$70,100</td><td class="text-right change-up">5.36%</td></tr><tr><td><span class="forecast-time">April 11, 2024</span></td><td class="text-right">$70,735</td><td class="text-right change-up">6.32%</td></tr><tr><td><span class="forecast-time">April 12, 2024</span></td><td class="text-right">$70,492</td><td class="text-right change-up">5.95%</td></tr><tr><td><span class="forecast-time">April 13, 2024</span></td><td class="text-right">$70,162</td><td class="text-right change-up">5.46%</td></tr><tr><td><span class="forecast-time">April 14, 2024</span></td><td class="text-right">$70,455</td><td class="text-right change-up">5.9%</td></tr><tr><td><span class="forecast-time">April 15, 2024</span></td><td class="text-right">$71,232</td><td class="text-right change-up">7.06%</td></tr><tr><td><span class="forecast-time">April 16, 2024</span></td><td class="text-right">$72,325</td><td class="text-right change-up">8.71%</td></tr><tr><td><span class="forecast-time">April 17, 2024</span></td><td class="text-right">$74,579</td><td class="text-right change-up">12.09%</td></tr><tr><td><span class="forecast-time">April 18, 2024</span></td><td class="text-right">$76,835</td><td class="text-right change-up">15.49%</td></tr><tr><td><span class="forecast-time">April 19, 2024</span></td><td class="text-right">$79,706</td><td class="text-right change-up">19.8%</td></tr><tr><td><span class="forecast-time">April 20, 2024</span></td><td class="text-right">$82,673</td><td class="text-right change-up">24.26%</td></tr><tr><td><span class="forecast-time">April 21, 2024</span></td><td class="text-right">$85,215</td><td class="text-right change-up">28.08%</td></tr><tr><td><span class="forecast-time">April 22, 2024</span></td><td class="text-right">$87,361</td><td class="text-right change-up">31.31%</td></tr></tbody></table></figure>
<script>
    let currentDate = new Date();

    function renderCalendar() {
        const tableBody = document.getElementById("calendar-body");
        tableBody.innerHTML = "";

        const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();
        const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();

        let date = 1;
        for (let i = 0; i < 6; i++) {
            const tableRow = document.createElement("tr");
            for (let j = 0; j < 7; j++) {
                if ((i === 0 && j < firstDayOfMonth) || date > daysInMonth) {
                    const emptyCell = document.createElement("td");
                    tableRow.appendChild(emptyCell);
                } else {
                    const cell = document.createElement("td");
                    cell.textContent = date;
                    cell.dataset.date = formatDate(currentDate.getFullYear(), currentDate.getMonth() + 1, date);
                    tableRow.appendChild(cell);

                    // 恢复已存储的事件
                    const storedEvent = localStorage.getItem(cell.dataset.date);
                    if (storedEvent) {
                        const eventDiv = document.createElement("div");
                        eventDiv.innerText = storedEvent;
                        eventDiv.classList.add("event");
                        cell.appendChild(eventDiv);
                    }

                    date++;
                }
            }
            tableBody.appendChild(tableRow);
        }
    }

    function formatDate(year, month, day) {
        return year + "-" + (month < 10 ? "0" + month : month) + "-" + (day < 10 ? "0" + day : day);
    }

    function addEvent() {
        const dateInput = document.getElementById("event-date");
        const eventNameInput = document.getElementById("event-name");
        const date = dateInput.value;
        const eventName = eventNameInput.value;

        const table = document.getElementById("calendar-body");
        const cells = table.getElementsByTagName("td");
        for (const cell of cells) {
            if (cell.dataset.date === date) {
                const eventDiv = document.createElement("div");
                eventDiv.innerText = eventName;
                eventDiv.classList.add("event");
                cell.appendChild(eventDiv);

                // 将事件存储在本地存储中
                localStorage.setItem(date, eventName);
                break;
            }
        }
    }

    function previousMonth() {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar();
    }

    function nextMonth() {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar();
    }

    // 初始化日历
    renderCalendar();
</script>

</body>
</html>
